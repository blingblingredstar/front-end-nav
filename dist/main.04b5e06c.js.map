{"version":3,"sources":["js/main.js"],"names":["getState","defaultState","state","JSON","parse","localStorage","getItem","Array","isArray","logo","type","content","url","name","setState","newState","setItem","stringify","render","$","find","remove","$siteAdd","forEach","item","index","insertBefore","on","deleteSite","showModal","tops","document","scrollTop","bind","css","window","pageYOffset","removeClass","closeModal","unbind","addClass","addSite","e","stopPropagation","val","newItem","toLocaleUpperCase","concat","parent","data","splice"],"mappings":";AAAA,IAAMA,EAAW,WACTC,IA2CAC,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,UAE1CC,OAAAA,MAAMC,QAAQN,GACTA,EA9CY,CACnB,CACEO,KAAM,CACJC,KAAM,MACNC,QACE,0JAEJC,IAAK,4BACLC,KAAM,QAER,CACEJ,KAAM,CACJC,KAAM,SACNC,QAAS,KAEXC,IAAK,yBACLC,KAAM,MAER,CACEJ,KAAM,CACJC,KAAM,SACNC,QAAS,KAEXC,IAAK,4BACLC,KAAM,gBAER,CACEJ,KAAM,CACJC,KAAM,SACNC,QAAS,KAEXC,IAAK,4BACLC,KAAM,gBAER,CACEJ,KAAM,CACJC,KAAM,SACNC,QAAS,KAEXC,IAAK,4BACLC,KAAM,kBAYNC,EAAW,SAACC,GAChBV,aAAaW,QAAQ,QAASb,KAAKc,UAAUF,IAC7CG,EAAOH,IAGHG,EAAS,SAAChB,GACdiB,EAAE,cACCC,KAAK,qBACLC,SACGC,IAAAA,EAAWH,EAAE,aACnBjB,EAAMqB,QAAQ,SAACC,EAAMC,GACPN,EAAuCM,qCAAAA,OAAAA,EACpCD,yBAAAA,OAAAA,EAAKZ,IAGVY,uDAAAA,OAAmB,WAAnBA,EAAKf,KAAKC,KACNc,EAAKf,KAAKE,QACGa,aAAAA,OAAAA,EAAKf,KAAKE,QAAiBa,WAAAA,OAAAA,EAAKX,KAN9C,6BASkBW,yDAAAA,OAAAA,EAAKX,KATpC,gsBA4BIa,aAAaJ,KAEnBH,EAAE,oBAAoBQ,GAAG,QAASC,IAG9BC,EAAY,WAEVC,IAAAA,EAAOX,EAAEY,UAAUC,YACzBb,EAAEY,UAAUE,KAAK,SAAU,WACzBd,EAAEY,UAAUC,UAAUF,KAGxBX,EAAE,eACFA,EAAE,UACCe,IAAI,aAAcC,OAAOC,YAAc,MACvCC,YAAY,WAGXC,EAAa,WACjBnB,EAAEY,UAAUQ,OAAO,UAEnBpB,EAAE,UAAUqB,SAAS,WAGjBC,EAAU,WACdZ,IACAV,EAAE,cAAcQ,GAAG,QAAS,SAACe,GAC3BA,EAAEC,kBACI/B,IAAAA,EAAMO,EAAE,oBAAoByB,MAC5B/B,EAAOM,EAAE,qBAAqByB,MAE9BC,EAAU,CACdpC,KAAM,CACJC,KAAM,SACNC,QAASE,EAAK,GAAGiC,qBAEnBlC,IAAAA,EACAC,KAAAA,GAGIE,EADQf,IACS+C,OAAO,CAACF,IAC/B/B,EAASC,GAETI,EAAE,oBAAoByB,IAAI,IAC1BzB,EAAE,qBAAqByB,IAAI,IAE3BN,MAGFnB,EAAE,gBAAgBQ,GAAG,QAASW,IAGhC,SAASV,IACDH,IAAAA,EAAQN,EAAE,MACb6B,SACAC,KAAK,SAEF/C,EAAQF,IACdE,EAAMgD,OAAOzB,EAAO,GACpBX,EAASZ,GAGXiB,EAAE,aAAaQ,GAAG,QAASc,GAE3BvB,EAAOlB","file":"main.04b5e06c.js","sourceRoot":"../src","sourcesContent":["const getState = () => {\n  const defaultState = [\n    {\n      logo: {\n        type: 'img',\n        content:\n          'https://gss1.bdstatic.com/-vo3dSag_xI4khGkpoWK1HF6hhy/baike/w%3D268/sign=1e6e214ea31ea8d38a227302af0b30cf/7c1ed21b0ef41bd580fa7e0154da81cb38db3d9d.jpg',\n      },\n      url: 'https://www.bilibili.com/',\n      name: '哔哩哔哩',\n    },\n    {\n      logo: {\n        type: 'String',\n        content: '知',\n      },\n      url: 'https://www.zhihu.com/',\n      name: '知乎',\n    },\n    {\n      logo: {\n        type: 'String',\n        content: 'B',\n      },\n      url: 'https://www.bilibili.com/',\n      name: 'bilibili.com',\n    },\n    {\n      logo: {\n        type: 'String',\n        content: 'B',\n      },\n      url: 'https://www.bilibili.com/',\n      name: 'bilibili.com',\n    },\n    {\n      logo: {\n        type: 'String',\n        content: 'B',\n      },\n      url: 'https://www.bilibili.com/',\n      name: 'bilibili.com',\n    },\n  ]\n  const state = JSON.parse(localStorage.getItem('state'))\n\n  if (Array.isArray(state)) {\n    return state\n  } else {\n    return defaultState\n  }\n}\n\nconst setState = (newState) => {\n  localStorage.setItem('state', JSON.stringify(newState))\n  render(newState)\n}\n\nconst render = (state) => {\n  $('.site-list')\n    .find('li:not(.site-add)')\n    .remove()\n  const $siteAdd = $('.site-add')\n  state.forEach((item, index) => {\n    const $li = $(`<li class=\"site-item\" data-index=\"${index}\">\n        <a href=\"${item.url}\">\n          <div class=\"site-logo\">\n            ${\n              item.logo.type === 'String'\n                ? item.logo.content\n                : `<img src=\"${item.logo.content}\" alt=\"${item.name}\" class=\"site-logo-img\"/>`\n            }\n          </div>\n          <div class=\"site-name\">${item.name}</div>\n        </a>\n        <div class=\"site-item-close\">\n          <svg\n            t=\"1572014249855\"\n            class=\"icon\"\n            viewBox=\"0 0 1024 1024\"\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            p-id=\"2878\"\n       \n          >\n            <path\n              d=\"M515.236 491.069l-136.96-136.96a17.092 17.092 0 1 0-24.18 24.155l136.961 136.972-136.96 136.972a17.092 17.092 0 1 0 24.167 24.167l136.972-136.96 136.972 136.96a17.092 17.092 0 1 0 24.167-24.156l-136.96-136.983 136.96-136.96a17.092 17.092 0 1 0-24.167-24.168l-136.96 136.96z\"\n              p-id=\"2879\"\n            ></path>\n          </svg>\n        </div>\n      </li>`)\n    $li.insertBefore($siteAdd)\n  })\n  $('.site-item-close').on('click', deleteSite)\n}\n\nconst showModal = () => {\n  // 锁定页面位置，禁止滚动\n  const tops = $(document).scrollTop()\n  $(document).bind('scroll', function() {\n    $(document).scrollTop(tops)\n  })\n  //\n  $('.modal-form')\n  $('.modal')\n    .css('margin-top', window.pageYOffset + 'px')\n    .removeClass('closed')\n}\n\nconst closeModal = () => {\n  $(document).unbind('scroll')\n\n  $('.modal').addClass('closed')\n}\n\nconst addSite = () => {\n  showModal()\n  $('.modal-btn').on('click', (e) => {\n    e.stopPropagation()\n    const url = $('.modal-input-url').val()\n    const name = $('.modal-input-name').val()\n\n    const newItem = {\n      logo: {\n        type: 'String',\n        content: name[0].toLocaleUpperCase(),\n      },\n      url,\n      name,\n    }\n    const state = getState()\n    const newState = state.concat([newItem])\n    setState(newState)\n\n    $('.modal-input-url').val('')\n    $('.modal-input-name').val('')\n\n    closeModal()\n  })\n\n  $('.modal-close').on('click', closeModal)\n}\n\nfunction deleteSite() {\n  const index = $(this)\n    .parent()\n    .data('index')\n\n  const state = getState()\n  state.splice(index, 1)\n  setState(state)\n}\n\n$('.site-add').on('click', addSite)\n\nrender(getState())\n"]}